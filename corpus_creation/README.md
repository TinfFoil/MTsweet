
# Corpora

This directory contains the scripts used to generate both the machine translated version of the text as well as the script for their automatic evaluation.


## `translate_Azure.py`
`translate_Azure.py` is the CLI script to call the Microsoft Translator API.  

Given an API key and a TSV file containing the original corpora, run the software from the terminal using:

```bash
py translate_Azure.py [-h] --filepath FILEPATH --key APIKEY --src SOURCE --trg TARGET
```

All other arguments are required and have the following behaviors:

`--filepath` The source text to be translated. This should be a PATH to a tsv file, containing two columns:


| src | trg |
| :-: | :-: |
| text | text |
| ... | ... |
| text | text |



`--src` The source language, formatted following the [ISO-639-1](https://docs.microsoft.com/en-us/azure/cognitive-services/translator/language-support)

`--trg` The target language, formatted following the [ISO-639-1](https://docs.microsoft.com/en-us/azure/cognitive-services/translator/language-support)

`--key` The API key, saved in a separate TXT file.

The script generates a new TSV file, now containing the `MT` column and named `translated_{FILENAME}.tsv`







## `translate_MMT.py`
`translate_MMT.py` is the script to call the ModernMT API.
Given an API key and a TSV file containing the original corpora, run the software from the terminal using:

```bash
py translate_MMT.py [-h] --filepath FILEPATH --key APIKEY --src SOURCE --trg TARGET
```

All other arguments are required and have the following behaviors:

`--filepath` The source text to be translated. This should be a PATH to a tsv file, containing two columns:


| src | trg |
| :-: | :-: |
| text | text |
| ... | ... |
| text | text |



`--src` The source language, formatted following the [ISO-639-1](https://www.modernmt.com/api/#languages)

`--trg` The target language, formatted following the [ISO-639-1](https://www.modernmt.com/api/#languages)

`--key` The API key, saved in a separate TXT file.

The script generates a new TSV file, now containing the `MT` column and named `translated_{FILENAME}.tsv`


## `get_evaluation.py`
`get_evaluation.py` is the script to obtain the automatic evaluation scores using four different Evaluation or Quality Estimation metrics, namely [cushLEPOR](https://github.com/poethan/cushLEPOR), [BERTScore](https://github.com/Tiiiger/bert_score), [COMET](https://github.com/Unbabel/COMET/blob/master/METRICS.md) and [TransQuest](https://github.com/TharinduDR/TransQuest).
Given the TSV file obtained using the two previous scripts, run the software from the terminal using:

```bash
py get_evaluation.py [-h] --filepath FILEPATH --ref REFERENCE --src SOURCE --trg TARGET
```

All arguments are required and have the following behaviors:

`--filepath` The original TSV file containing the source, reference and machine translatied text to be evaluated. This should be a PATH to a tsv file, containing three columns:


| src | ref | trg |
| :-: | :-: | :-: |
| text | text | text|
| ... | ... | ... |
| text | text | text |



`--src` The source language, formatted following the [ISO-639-1](https://www.modernmt.com/api/#languages)

`--ref` The machine translation of the source text. It is sufficient to only specify the column. If you are using TSV files generated by the previous scripts, then it is sufficient to insert 'MT'

`--trg` The target language, formatted following the [ISO-639-1](https://www.modernmt.com/api/#languages)



The script generates a new TSV file, now containing the `scores` column and named `scored_{FILENAME}.tsv`




